{
  "version": 3,
  "sources": ["../../../workers/router.ts"],
  "sourceRoot": "C:\\Users\\Slizz\\OneDrive\\Documents\\GitHub\\mkp-tri\\.wrangler\\tmp\\deploy-3ojW39",
  "sourcesContent": ["export interface Env {\r\n  OMNI_ENDPOINT: string;\r\n  CODEX_BUCKET: string;\r\n}\r\n\r\nimport type { ExecutionContext } from '@cloudflare/workers-types';\r\n\r\nexport default {\r\n  async fetch(request: Request, env: Env, ctx: ExecutionContext): Promise<Response> {\r\n    const url = new URL(request.url);\r\n\r\n    if (url.pathname.startsWith(\"/omni/edge\")) {\r\n      return handleOmni(request, env);\r\n    }\r\n\r\n    if (url.pathname.startsWith(\"/codex/edge\")) {\r\n      return handleCodex(request, env);\r\n    }\r\n\r\n    return new Response(\"MKP-TRI router online. Static assets served by Pages.\", {\r\n      status: 200,\r\n      headers: { \"content-type\": \"text/plain; charset=utf-8\" }\r\n    });\r\n  }\r\n};\r\n\r\nasync function handleOmni(request: Request, env: Env): Promise<Response> {\r\n  if (request.method !== \"POST\") {\r\n    return new Response(\"Use POST for Omni calls.\", { status: 405 });\r\n  }\r\n\r\n  const body = await request.json().catch(() => ({}));\r\n  return new Response(\r\n    JSON.stringify({\r\n      status: \"stubbed\",\r\n      received: body,\r\n      endpoint: env.OMNI_ENDPOINT\r\n    }),\r\n    {\r\n      status: 200,\r\n      headers: { \"content-type\": \"application/json\" }\r\n    }\r\n  );\r\n}\r\n\r\nasync function handleCodex(_request: Request, env: Env): Promise<Response> {\r\n  return new Response(\r\n    JSON.stringify({\r\n      status: \"stubbed\",\r\n      bucket: env.CODEX_BUCKET,\r\n      message: \"Codex worker is ready to bind to storage.\"\r\n    }),\r\n    {\r\n      status: 200,\r\n      headers: { \"content-type\": \"application/json\" }\r\n    }\r\n  );\r\n}\r\n"],
  "mappings": ";;;;AAOA,IAAO,iBAAQ;AAAA,EACb,MAAM,MAAM,SAAkB,KAAU,KAA0C;AAChF,UAAM,MAAM,IAAI,IAAI,QAAQ,GAAG;AAE/B,QAAI,IAAI,SAAS,WAAW,YAAY,GAAG;AACzC,aAAO,WAAW,SAAS,GAAG;AAAA,IAChC;AAEA,QAAI,IAAI,SAAS,WAAW,aAAa,GAAG;AAC1C,aAAO,YAAY,SAAS,GAAG;AAAA,IACjC;AAEA,WAAO,IAAI,SAAS,yDAAyD;AAAA,MAC3E,QAAQ;AAAA,MACR,SAAS,EAAE,gBAAgB,4BAA4B;AAAA,IACzD,CAAC;AAAA,EACH;AACF;AAEA,eAAe,WAAW,SAAkB,KAA6B;AACvE,MAAI,QAAQ,WAAW,QAAQ;AAC7B,WAAO,IAAI,SAAS,4BAA4B,EAAE,QAAQ,IAAI,CAAC;AAAA,EACjE;AAEA,QAAM,OAAO,MAAM,QAAQ,KAAK,EAAE,MAAM,OAAO,CAAC,EAAE;AAClD,SAAO,IAAI;AAAA,IACT,KAAK,UAAU;AAAA,MACb,QAAQ;AAAA,MACR,UAAU;AAAA,MACV,UAAU,IAAI;AAAA,IAChB,CAAC;AAAA,IACD;AAAA,MACE,QAAQ;AAAA,MACR,SAAS,EAAE,gBAAgB,mBAAmB;AAAA,IAChD;AAAA,EACF;AACF;AAjBe;AAmBf,eAAe,YAAY,UAAmB,KAA6B;AACzE,SAAO,IAAI;AAAA,IACT,KAAK,UAAU;AAAA,MACb,QAAQ;AAAA,MACR,QAAQ,IAAI;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,IACD;AAAA,MACE,QAAQ;AAAA,MACR,SAAS,EAAE,gBAAgB,mBAAmB;AAAA,IAChD;AAAA,EACF;AACF;AAZe;",
  "names": []
}
